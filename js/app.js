const BACKEND="REPLACE_WITH_BACKEND_URL";async function apiPost(p,b,t){return fetch(BACKEND+p,{method:"POST",headers:{"Content-Type":"application/json",Authorization:t?"Bearer "+t:""},body:JSON.stringify(b)}).then(r=>r.json())}async function apiGet(p,t){return fetch(BACKEND+p,{headers:{Authorization:t?"Bearer "+t:""}}).then(r=>r.json())}if(document.getElementById("login")){document.getElementById("login").onclick=async()=>{const j=await apiPost("/auth/login",{email:email.value,password:password.value});if(j.ok){localStorage.setItem("fhmc_token",j.token);location.href="dashboard.html"}else alert(JSON.stringify(j))};document.getElementById("signup").onclick=async()=>{const j=await apiPost("/auth/signup",{email:su_email.value,password:su_password.value});if(j.ok){localStorage.setItem("fhmc_token",j.token);location.href="dashboard.html"}else alert(JSON.stringify(j))}}if(document.getElementById("create")){(async()=>{const v=await apiGet("/api/mc/versions",localStorage.getItem("fhmc_token"));const sel=document.getElementById("version");sel.innerHTML="";v.versions.forEach(ver=>{const o=document.createElement("option");o.value=ver;o.textContent=ver;sel.appendChild(o)})})();document.getElementById("create").onclick=async()=>{const t=localStorage.getItem("fhmc_token");const name=srv_name.value;const version=document.getElementById("version").value;const software=document.getElementById("software").value;const plugins=document.getElementById("plugins").value.split(",").map(p=>p.trim()).filter(x=>x);const j=await apiPost("/api/server/create",{name,version,software,plugins,mods:[]},t);if(j.ok){alert("Your server is ready!\nDownload: "+BACKEND+j.download)}else alert(JSON.stringify(j))}}